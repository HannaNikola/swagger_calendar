{
  "openapi": "3.0.1",
  "info": {
    "title": "Calendar API",
    "version": "1.0.0",
    "description": "API documentation for Calendar App",
    "license": {
      "name": "MIT",
      "url": "https://opensource.org/licenses/MIT"
    }
  },
  "servers": [
    {
      "url": "https://calendar-back-end-s3b2.onrender.com"
    }
  ],
  "tags": [
    {
      "name": "Events",
      "description": "Operations with calendar events"
    },
    {
      "name": "Todos",
      "description": "Operations with todo tasks"
    }
  ],
  "paths": {
    "/api/events/": {
      "get": {
        "tags": ["Events"],
        "summary": "Get all events",
        "description": "Returns the full collection of events from the database.",
        "responses": {
          "200": {
            "description": "A list of events",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Event"
                  }
                },
                "example": [
                  {
                    "_id": "6628a6f2bcf42f001c26eec9",
                    "title": "Team meeting",
                    "start": "2025-04-17T10:00:00.000Z",
                    "end": "2025-04-17T11:00:00.000Z",
                    "allDay": false,
                    "addTask": false,
                    "createdAt": "2025-04-15T08:00:00.000Z",
                    "updatedAt": "2025-04-15T08:00:00.000Z"
                  },
                  {
                    "_id": "6628a6f2bcf42f001c26eed0",
                    "title": "Doctor Appointment",
                    "start": "2025-04-18T15:30:00.000Z",
                    "end": "2025-04-18T16:00:00.000Z",
                    "allDay": false,
                    "addTask": true,
                    "createdAt": "2025-04-16T09:00:00.000Z",
                    "updatedAt": "2025-04-16T09:00:00.000Z"
                  }
                ]
              }
            }
          },
          "500": {
            "description": "Internal server error"
          }
        }
      },
      "post": {
        "tags": ["Events"],
        "summary": "Create a new event",
        "description": "Adds a new event to the database.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/NewEvent"
              },
              "example": {
                "title": "Test Event",
                "start": "2025-04-20T10:00:00Z",
                "end": "2025-04-20T11:00:00Z",
                "allDay": false,
                "addTask": true
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Event created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Event"
                }
              }
            }
          },
          "400": {
            "description": "Invalid input data"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/api/events/{id}": {
      "get": {
        "tags": ["Events"],
        "summary": "Get one event by Id",
        "description": "Returns a single event from the database by its ID.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "The ID of the event to retrieve",
            "schema": {
              "type": "string",
              "pattern": "^[0-9a-fA-F]{24}$",
              "example": "6628a6f2bcf42f001c26eec9"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation - single event returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Event"
                }
              }
            }
          },
          "400": {
            "description": "Invalid ID format"
          },
          "404": {
            "description": "Event not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      },
      "patch": {
        "tags": ["Events"],
        "summary": "Update an event by ID",
        "description": "Updates an existing event in the database by its ID.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "The ID of the event to update",
            "schema": {
              "type": "string",
              "pattern": "^[0-9a-fA-F]{24}$",
              "example": "6628a6f2bcf42f001c26eec9"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/NewEvent"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successfully updated event",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Event"
                }
              }
            }
          },
          "404": {
            "description": "Event not found"
          },
          "400": {
            "description": "Invalid input data"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      },
      "delete": {
        "tags": ["Events"],
        "summary": "Delete an event by ID",
        "description": "Deletes a specific event from the database using its ID.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "The ID of the event to delete",
            "schema": {
              "type": "string",
              "pattern": "^[0-9a-fA-F]{24}$",
              "example": "6628a6f2bcf42f001c26eec9"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Event deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Event deleted successfully"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid input data"
          },
          "404": {
            "description": "Event not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/api/todo/": {
      "get": {
        "tags": ["Todos"],
        "summary": "Get all Todo",
        "description": "Returns the full collection of Todo from the database.",
        "responses": {
          "200": {
            "description": "A list of Todo",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/Todos"
                  }
                },
                "example": [
                  {
                    "_id": "68a3563ec408cc56ed9c8d69",
                    "title": "Task",
                    "description": "Give a cat food",
                    "isImportant": true,
                    "isCompleted": false,
                    "end": "2025-08-09T14:35:00.000Z",
                    "allDay": true,
                    "eventId": "68975ca0c0053e8732e42845",
                    "repeat": "none",
                    "reminder": {
                      "triggerBefore": "30min",
                      "notifyAt": "2025-08-09T14:05:00.000Z",
                      "notified": false
                    },
                    "createdAt": "2025-08-18T16:35:10.955Z",
                    "updatedAt": "2025-08-18T18:01:23.854Z",
                    "isOverdue": true
                  },
                  {
                    "_id": "68a3563ec408cc56ed9c8d69",
                    "title": "Birthday party",
                    "description": "Buy present for",
                    "isImportant": true,
                    "isCompleted": false,
                    "end": "2025-08-09T14:35:00.000Z",
                    "allDay": true,
                    "eventId": "68975ca0c0053e8732e42845",
                    "repeat": "none",
                    "reminder": {
                      "triggerBefore": "30min",
                      "notifyAt": "2025-08-09T14:05:00.000Z",
                      "notified": false
                    },
                    "createdAt": "2025-08-18T16:35:10.955Z",
                    "updatedAt": "2025-08-18T18:01:23.854Z",
                    "isOverdue": true
                  }
                ]
              }
            }
          },
          "500": {
            "description": "Internal server error"
          }
        }
      },
      "post": {
        "tags": ["Todos"],
        "summary": "Create a new Todo",
        "description": "Adds a new Todo to the database.",
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/NewTodo"
              },
              "example": {
                "title": "Birthday party",
                "description": "Buy present for",
                "isImportant": true,
                "isCompleted": false,
                "end": "2025-08-09T14:35:00.000Z",
                "allDay": true,
                "eventId": "68975ca0c0053e8732e42845",
                "repeat": "none",
                "reminder": {
                  "triggerBefore": "30min",
                  "notifyAt": "2025-08-09T14:05:00.000Z",
                  "notified": false
                }
              }
            }
          }
        },
        "responses": {
          "201": {
            "description": "Todo created successfully",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Todos"
                }
              }
            }
          },
          "400": {
            "description": "Bad request"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    },
    "/api/todo/{id}": {
      "get": {
        "tags": ["Todos"],
        "summary": "Get one Todo by Id",
        "description": "Returns a single Todo from the database by its ID.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "ID of the Todo to retrieve",
            "schema": {
              "type": "string",
              "example": "689e2dcc80446af7e2a5c6bf",
              "pattern": "^[0-9a-fA-F]{24}$"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Successful operation - single Todo returned",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Todos"
                },
                "example": {
                  "_id": "68a3563ec408cc56ed9c8d69",
                  "title": "Task",
                  "description": "Give a cat food",
                  "isImportant": true,
                  "isCompleted": false,
                  "end": "2025-08-09T14:35:00.000Z",
                  "allDay": true,
                  "eventId": "68975ca0c0053e8732e42845",
                  "repeat": "none",
                  "reminder": {
                    "triggerBefore": "30min",
                    "notifyAt": "2025-08-09T14:05:00.000Z",
                    "notified": false
                  },
                  "createdAt": "2025-08-18T16:35:10.955Z",
                  "updatedAt": "2025-08-18T18:01:23.854Z",
                  "isOverdue": true
                }
              }
            }
          },
          "404": {
            "description": "Todo not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      },
      "patch": {
        "tags": ["Todos"],
        "summary": "Update an Todo by ID",
        "description": "Partially updates an existing Todo by its ID. Only provided fields will be updated.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "The ID of the Todo to update",
            "schema": {
              "type": "string",
              "pattern": "^[0-9a-fA-F]{24}$",
              "example": "689e2dcc80446af7e2a5c6bf"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/NewTodo"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Successfully updated Todo",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Todos"
                }
              }
            }
          },
          "400": {
            "description": "Invalid input data"
          },
          "404": {
            "description": "Todo not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      },
      "delete": {
        "tags": ["Todos"],
        "summary": "Delete an Todo by ID",
        "description": "Deletes a specific Todo from the database using its ID.",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "required": true,
            "description": "The ID of the Todo to delete",
            "schema": {
              "type": "string",
              "pattern": "^[0-9a-fA-F]{24}$",
              "example": "689e2dcc80446af7e2a5c6bf"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Todo deleted successfully",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "message": {
                      "type": "string",
                      "example": "Todo deleted successfully"
                    }
                  }
                }
              }
            }
          },
          "400": {
            "description": "Invalid ID format"
          },
          "404": {
            "description": "Todo not found"
          },
          "500": {
            "description": "Internal server error"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "NewEvent": {
        "type": "object",
        "required": ["title"],
        "properties": {
          "title": {
            "type": "string",
            "example": "Meeting with team"
          },
          "start": {
            "type": "string",
            "format": "date-time",
            "example": "2025-04-18T10:00:00Z"
          },
          "end": {
            "type": "string",
            "format": "date-time",
            "example": "2025-04-18T11:00:00Z"
          },
          "allDay": {
            "type": "boolean",
            "example": false
          },
          "addTask": {
            "type": "boolean",
            "example": true
          }
        }
      },
      "Event": {
        "allOf": [
          {
            "$ref": "#/components/schemas/NewEvent"
          },
          {
            "type": "object",
            "properties": {
              "_id": {
                "type": "string",
                "pattern": "^[0-9a-fA-F]{24}$",
                "example": "6628a6f2bcf42f001c26eec9",
                "readOnly": true
              },
              "createdAt": {
                "type": "string",
                "format": "date-time",
                "example": "2025-08-18T16:35:10.955Z",
                "readOnly": true
              },
              "updatedAt": {
                "type": "string",
                "format": "date-time",
                "example": "2025-08-18T18:01:23.854Z",
                "readOnly": true
              }
            },
            "required": ["_id", "createdAt", "updatedAt"]
          }
        ]
      },
      "NewTodo": {
        "type": "object",
        "required": ["title", "eventId", "end"],
        "properties": {
          "title": {
            "type": "string",
            "minLength": 1,
            "example": "New Todo Title"
          },
          "description": {
            "type": "string",
            "example": "New Todo description"
          },
          "isImportant": {
            "type": "boolean",
            "default": false,
            "example": true
          },
          "isCompleted": {
            "type": "boolean",
            "default": false,
            "example": false
          },
          "end": {
            "type": "string",
            "format": "date-time",
            "example": "2025-04-20T11:00:00Z"
          },
          "allDay": {
            "type": "boolean",
            "default": false,
            "example": false
          },
          "eventId": {
            "type": "string",
            "pattern": "^[0-9a-fA-F]{24}$",
            "example": "6628a6f2bcf42f001c26eec9"
          },
          "repeat": {
            "type": "string",
            "enum": ["none", "daily", "weekday", "weekend"],
            "default": "none",
            "example": "daily"
          },
          "reminder": {
            "type": "object",
            "properties": {
              "triggerBefore": {
                "type": "string",
                "enum": ["30min", "1hour", "1day", "none"],
                "default": "none",
                "example": "1hour"
              },
              "notifyAt": {
                "type": "string",
                "format": "date-time",
                "nullable": true,
                "example": "2025-05-20T17:00:00Z"
              },
              "notified": {
                "type": "boolean",
                "default": false,
                "example": false,
                "readOnly": true
              }
            }
          }
        }
      },
      "Todos": {
        "allOf": [
          {
            "$ref": "#/components/schemas/NewTodo"
          },
          {
            "type": "object",
            "properties": {
              "_id": {
                "type": "string",
                "pattern": "^[0-9a-fA-F]{24}$",
                "example": "68a3563ec408cc56ed9c8d69",
                "readOnly": true
              },
              "createdAt": {
                "type": "string",
                "format": "date-time",
                "example": "2025-08-18T16:35:10.955Z",
                "readOnly": true
              },
              "updatedAt": {
                "type": "string",
                "format": "date-time",
                "example": "2025-08-18T18:01:23.854Z",
                "readOnly": true
              },
              "isOverdue": {
                "type": "boolean",
                "example": true,
                "readOnly": true
              }
            },
            "required": ["_id", "createdAt", "updatedAt"]
          }
        ]
      }
    }
  }
}
